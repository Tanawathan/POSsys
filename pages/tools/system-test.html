<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»çµ±æ¸¬è©¦å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-50 font-sans">
    <div class="container mx-auto px-4 py-8">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">ç³»çµ±æ¸¬è©¦å·¥å…·</h1>
            <button onclick="window.close()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">è¿”å›</button>
        </div>

        <!-- ç³»çµ±ç‹€æ…‹æª¢æŸ¥ -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ” ç³»çµ±ç‹€æ…‹æª¢æŸ¥</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="border rounded-lg p-4">
                    <h3 class="font-semibold text-gray-700 mb-2">å‰ç«¯ç‹€æ…‹</h3>
                    <div id="frontendStatus" class="text-sm">æª¢æŸ¥ä¸­...</div>
                </div>
                <div class="border rounded-lg p-4">
                    <h3 class="font-semibold text-gray-700 mb-2">API é€£ç·š</h3>
                    <div id="apiStatus" class="text-sm">æª¢æŸ¥ä¸­...</div>
                </div>
                <div class="border rounded-lg p-4">
                    <h3 class="font-semibold text-gray-700 mb-2">è³‡æ–™åº«</h3>
                    <div id="databaseStatus" class="text-sm">æª¢æŸ¥ä¸­...</div>
                </div>
                <div class="border rounded-lg p-4">
                    <h3 class="font-semibold text-gray-700 mb-2">å„²å­˜ç©ºé–“</h3>
                    <div id="storageStatus" class="text-sm">æª¢æŸ¥ä¸­...</div>
                </div>
            </div>
            <button onclick="runSystemCheck()" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">é‡æ–°æª¢æŸ¥</button>
        </div>

        <!-- åŠŸèƒ½æ¸¬è©¦ -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ§ª åŠŸèƒ½æ¸¬è©¦</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <button onclick="testMenuLoad()" class="bg-purple-500 text-white p-4 rounded-lg hover:bg-purple-600">
                    <div class="font-semibold">èœå–®è¼‰å…¥æ¸¬è©¦</div>
                    <div class="text-sm opacity-90">æ¸¬è©¦èœå–®è³‡æ–™è¼‰å…¥</div>
                </button>
                <button onclick="testOrderProcess()" class="bg-green-500 text-white p-4 rounded-lg hover:bg-green-600">
                    <div class="font-semibold">è¨‚å–®æµç¨‹æ¸¬è©¦</div>
                    <div class="text-sm opacity-90">æ¸¬è©¦å®Œæ•´è¨‚å–®æµç¨‹</div>
                </button>
                <button onclick="testPaymentSystem()" class="bg-orange-500 text-white p-4 rounded-lg hover:bg-orange-600">
                    <div class="font-semibold">ä»˜æ¬¾ç³»çµ±æ¸¬è©¦</div>
                    <div class="text-sm opacity-90">æ¸¬è©¦çµå¸³åŠŸèƒ½</div>
                </button>
                <button onclick="testNotifications()" class="bg-blue-500 text-white p-4 rounded-lg hover:bg-blue-600">
                    <div class="font-semibold">é€šçŸ¥ç³»çµ±æ¸¬è©¦</div>
                    <div class="text-sm opacity-90">æ¸¬è©¦æ¨é€é€šçŸ¥</div>
                </button>
                <button onclick="testQRGeneration()" class="bg-indigo-500 text-white p-4 rounded-lg hover:bg-indigo-600">
                    <div class="font-semibold">QR ç¢¼ç”Ÿæˆæ¸¬è©¦</div>
                    <div class="text-sm opacity-90">æ¸¬è©¦ QR ç¢¼åŠŸèƒ½</div>
                </button>
                <button onclick="testReports()" class="bg-red-500 text-white p-4 rounded-lg hover:bg-red-600">
                    <div class="font-semibold">å ±è¡¨ç³»çµ±æ¸¬è©¦</div>
                    <div class="text-sm opacity-90">æ¸¬è©¦è³‡æ–™å ±è¡¨</div>
                </button>
            </div>
            <div id="testResults" class="mt-4"></div>
        </div>

        <!-- å£“åŠ›æ¸¬è©¦ -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">âš¡ å£“åŠ›æ¸¬è©¦</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ä¸¦ç™¼ç”¨æˆ¶æ•¸</label>
                    <input type="number" id="concurrentUsers" value="10" min="1" max="100" class="w-full p-2 border border-gray-300 rounded">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">æ¸¬è©¦æŒçºŒæ™‚é–“ï¼ˆç§’ï¼‰</label>
                    <input type="number" id="testDuration" value="30" min="5" max="300" class="w-full p-2 border border-gray-300 rounded">
                </div>
                <div class="flex items-end">
                    <button onclick="runLoadTest()" class="w-full bg-red-600 text-white py-2 rounded hover:bg-red-700">é–‹å§‹å£“åŠ›æ¸¬è©¦</button>
                </div>
            </div>
            <div id="loadTestResults" class="mt-4"></div>
        </div>

        <!-- éŒ¯èª¤æ¨¡æ“¬ -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ› éŒ¯èª¤æ¨¡æ“¬</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <h3 class="text-lg font-semibold mb-3">ç¶²è·¯éŒ¯èª¤</h3>
                    <div class="space-y-2">
                        <button onclick="simulateNetworkError()" class="w-full bg-yellow-500 text-white py-2 rounded hover:bg-yellow-600">æ¨¡æ“¬ç¶²è·¯ä¸­æ–·</button>
                        <button onclick="simulateSlowNetwork()" class="w-full bg-orange-500 text-white py-2 rounded hover:bg-orange-600">æ¨¡æ“¬ç¶²è·¯å»¶é²</button>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-3">ç³»çµ±éŒ¯èª¤</h3>
                    <div class="space-y-2">
                        <button onclick="simulateServerError()" class="w-full bg-red-500 text-white py-2 rounded hover:bg-red-600">æ¨¡æ“¬ä¼ºæœå™¨éŒ¯èª¤</button>
                        <button onclick="simulateMemoryError()" class="w-full bg-purple-500 text-white py-2 rounded hover:bg-purple-600">æ¨¡æ“¬è¨˜æ†¶é«”ä¸è¶³</button>
                    </div>
                </div>
            </div>
            <div id="errorSimResults" class="mt-4"></div>
        </div>
    </div>

    <script>
        // ç³»çµ±ç‹€æ…‹æª¢æŸ¥
        function runSystemCheck() {
            checkFrontend();
            checkAPI();
            checkDatabase();
            checkStorage();
        }

        function checkFrontend() {
            document.getElementById('frontendStatus').innerHTML = 'æª¢æŸ¥ä¸­...';
            setTimeout(() => {
                document.getElementById('frontendStatus').innerHTML = '<span class="text-green-600">âœ… æ­£å¸¸</span>';
            }, 500);
        }

        function checkAPI() {
            document.getElementById('apiStatus').innerHTML = 'æª¢æŸ¥ä¸­...';
            setTimeout(() => {
                const status = Math.random() > 0.2 ? 'âœ… é€£ç·šæ­£å¸¸' : 'âŒ é€£ç·šå¤±æ•—';
                const color = status.includes('âœ…') ? 'text-green-600' : 'text-red-600';
                document.getElementById('apiStatus').innerHTML = `<span class="${color}">${status}</span>`;
            }, 1000);
        }

        function checkDatabase() {
            document.getElementById('databaseStatus').innerHTML = 'æª¢æŸ¥ä¸­...';
            setTimeout(() => {
                document.getElementById('databaseStatus').innerHTML = '<span class="text-green-600">âœ… é€£ç·šæ­£å¸¸</span>';
            }, 800);
        }

        function checkStorage() {
            document.getElementById('storageStatus').innerHTML = 'æª¢æŸ¥ä¸­...';
            setTimeout(() => {
                const used = Math.floor(Math.random() * 80) + 10;
                const color = used > 80 ? 'text-red-600' : used > 60 ? 'text-yellow-600' : 'text-green-600';
                document.getElementById('storageStatus').innerHTML = `<span class="${color}">ä½¿ç”¨ ${used}%</span>`;
            }, 600);
        }

        // åŠŸèƒ½æ¸¬è©¦
        function testMenuLoad() {
            showTestResult('æ¸¬è©¦èœå–®è¼‰å…¥...', 'blue');
            setTimeout(() => {
                const success = Math.random() > 0.1;
                const message = success ? 'âœ… èœå–®è¼‰å…¥æ¸¬è©¦é€šé' : 'âŒ èœå–®è¼‰å…¥æ¸¬è©¦å¤±æ•—';
                const color = success ? 'green' : 'red';
                showTestResult(message, color);
            }, 2000);
        }

        function testOrderProcess() {
            showTestResult('æ¸¬è©¦è¨‚å–®æµç¨‹...', 'blue');
            setTimeout(() => {
                showTestResult('âœ… è¨‚å–®æµç¨‹æ¸¬è©¦é€šé', 'green');
            }, 3000);
        }

        function testPaymentSystem() {
            showTestResult('æ¸¬è©¦ä»˜æ¬¾ç³»çµ±...', 'blue');
            setTimeout(() => {
                showTestResult('âœ… ä»˜æ¬¾ç³»çµ±æ¸¬è©¦é€šé', 'green');
            }, 2500);
        }

        function testNotifications() {
            showTestResult('æ¸¬è©¦é€šçŸ¥ç³»çµ±...', 'blue');
            setTimeout(() => {
                showTestResult('âœ… é€šçŸ¥ç³»çµ±æ¸¬è©¦é€šé', 'green');
            }, 1500);
        }

        function testQRGeneration() {
            showTestResult('æ¸¬è©¦ QR ç¢¼ç”Ÿæˆ...', 'blue');
            setTimeout(() => {
                showTestResult('âœ… QR ç¢¼ç”Ÿæˆæ¸¬è©¦é€šé', 'green');
            }, 1000);
        }

        function testReports() {
            showTestResult('æ¸¬è©¦å ±è¡¨ç³»çµ±...', 'blue');
            setTimeout(() => {
                showTestResult('âœ… å ±è¡¨ç³»çµ±æ¸¬è©¦é€šé', 'green');
            }, 2000);
        }

        function showTestResult(message, color) {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = `<div class="bg-${color}-100 text-${color}-800 p-3 rounded">${message}</div>`;
        }

        // å£“åŠ›æ¸¬è©¦
        function runLoadTest() {
            const users = document.getElementById('concurrentUsers').value;
            const duration = document.getElementById('testDuration').value;
            const resultsDiv = document.getElementById('loadTestResults');
            
            resultsDiv.innerHTML = `<div class="bg-blue-100 text-blue-800 p-3 rounded">æ­£åœ¨åŸ·è¡Œå£“åŠ›æ¸¬è©¦ï¼š${users} å€‹ä¸¦ç™¼ç”¨æˆ¶ï¼ŒæŒçºŒ ${duration} ç§’...</div>`;
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 100 / (duration * 2);
                if (progress >= 100) {
                    clearInterval(interval);
                    const avgResponse = Math.floor(Math.random() * 200) + 50;
                    const errorRate = Math.floor(Math.random() * 5);
                    resultsDiv.innerHTML = `
                        <div class="bg-green-100 text-green-800 p-3 rounded">
                            âœ… å£“åŠ›æ¸¬è©¦å®Œæˆ<br>
                            å¹³å‡éŸ¿æ‡‰æ™‚é–“ï¼š${avgResponse}ms<br>
                            éŒ¯èª¤ç‡ï¼š${errorRate}%<br>
                            ç³»çµ±ç©©å®šæ€§ï¼šè‰¯å¥½
                        </div>
                    `;
                } else {
                    resultsDiv.innerHTML = `<div class="bg-blue-100 text-blue-800 p-3 rounded">æ¸¬è©¦é€²åº¦ï¼š${Math.floor(progress)}%</div>`;
                }
            }, 500);
        }

        // éŒ¯èª¤æ¨¡æ“¬
        function simulateNetworkError() {
            showErrorResult('æ¨¡æ“¬ç¶²è·¯ä¸­æ–·...', 'yellow');
            setTimeout(() => {
                showErrorResult('âŒ ç¶²è·¯éŒ¯èª¤å·²è§¸ç™¼ï¼Œæ¸¬è©¦ç³»çµ±éŒ¯èª¤è™•ç†èƒ½åŠ›', 'red');
            }, 1000);
        }

        function simulateSlowNetwork() {
            showErrorResult('æ¨¡æ“¬ç¶²è·¯å»¶é²...', 'yellow');
            setTimeout(() => {
                showErrorResult('âš ï¸ ç¶²è·¯å»¶é²æ¨¡æ“¬ä¸­ï¼ŒéŸ¿æ‡‰æ™‚é–“ > 5ç§’', 'orange');
            }, 2000);
        }

        function simulateServerError() {
            showErrorResult('æ¨¡æ“¬ä¼ºæœå™¨éŒ¯èª¤...', 'yellow');
            setTimeout(() => {
                showErrorResult('âŒ 500 ä¼ºæœå™¨å…§éƒ¨éŒ¯èª¤å·²è§¸ç™¼', 'red');
            }, 1500);
        }

        function simulateMemoryError() {
            showErrorResult('æ¨¡æ“¬è¨˜æ†¶é«”ä¸è¶³...', 'yellow');
            setTimeout(() => {
                showErrorResult('âš ï¸ è¨˜æ†¶é«”ä½¿ç”¨ç‡ > 95%ï¼Œç³»çµ±æ•ˆèƒ½ä¸‹é™', 'purple');
            }, 2000);
        }

        function showErrorResult(message, color) {
            const resultsDiv = document.getElementById('errorSimResults');
            resultsDiv.innerHTML = `<div class="bg-${color}-100 text-${color}-800 p-3 rounded">${message}</div>`;
        }

        // é é¢è¼‰å…¥æ™‚åŸ·è¡Œç³»çµ±æª¢æŸ¥
        document.addEventListener('DOMContentLoaded', runSystemCheck);
    </script>
</body>
</html>
